<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    

    <title>Start List - SportOrg</title>
    

    
<style>
    p,
    blockquote,
    ul,
    ol,
    dl,
    table,
    pre {
        margin-top: 0;
        margin-bottom: 16px;
    }

    table.sportorg-table {
        display: block;
        width: 100%;
        overflow: visible;
        word-break: keep-all;
        border-collapse: collapse;
        border-spacing: 0;
    }

    table.sportorg-table th {
        font-weight: bold;
        border-bottom: 2px solid black;
        margin-bottom: 5px;
    }

    table.sportorg-table th,
    table.sportorg-table td {
        padding: 3px 13px;
        text-align: left;
        /*border: 1px solid #ddd;*/
    }

    table.sportorg-table tr {
        background-color: #fff;
        /*border-top: 1px solid #ccc;*/
        white-space: nowrap;
        overflow: hidden;
    }

    /*table.sportorg-table tr:nth-child(2n) {*/
        /*background-color: #f8f8f8;*/
    /*}*/

    table.empty-table {
        width: auto;
    }

    table.empty-table tr {
        background-color: white;
        border: 0;
    }

    table.empty-table td, table.empty-table th {
        border: 0;
    }

    hr {
        box-sizing: content-box;
        height: 0;
    }

    hr {
        height: 0;
        margin: 15px 0;
        overflow: hidden;
        background: transparent;
        border: 0;
        border-bottom: 1px solid #ddd;
    }

    hr:before {
        display: table;
        content: "";
    }

    hr:after {
        display: table;
        clear: both;
        content: "";
    }

    hr {
        height: 4px;
        padding: 0;
        margin: 16px 0;
        background-color: #e7e7e7;
        border: 0 none;
    }

    a:not([href]) {
        color: inherit;
        text-decoration: none;
    }

    a {
        color: #4078c0;
        text-decoration: none;
    }

    a:hover,
    a:active {
        text-decoration: underline;
    }

    a {
        background-color: transparent;
    }

    a:active,
    a:hover {
        outline: 0;
    }

    .print-only {
        display: none;
    }

    .no-print {
        display: block;
    }

    .nowrap {
        white-space: nowrap;
    }

    .text-center {
        text-align: center;
    }

    /* SPLITS */

    .table-leg {
        padding: 0;
        margin: 0;
    }

    .table-leg th,
    .table-leg td {
        border: 0;
    }

    .table-leg tr {
        border-top: 0;
    }

    .result-1,
    .result-2,
    .result-3 {
        font-weight: bold;
    }

    .result-1 {
        /*background: gold;*/
    }

    .result-2 {
        /*background: silver;*/
    }

    .result-3 {
        /*background: #cd7f32;*/
    }

    @media print {
        @page {
            margin: 0.5cm;
        }

        body {
            font-size: 85%;
        }

        table.sportorg-table {
            display: table;
            width: 100%;
        }

        table.sportorg-table th,
        table.sportorg-table td {
            padding: 1px 10px;
        }

        table.sportorg-table,
        pre {
            margin-bottom: 1px;
        }


        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 1px 0;
        }

        section, .new-page {
            page-break-before: always;
        }

        ul {
            page-break-inside: avoid;
        }

        p {
            widows: 4;
        }

        a[href^="http"]:after {
            content: " (" attr(href) ")";
        }

        abbr[title]:after {
            content: " (" attr(title) ")";
        }

        .print-only {
            display: inline;
        }

        .no-print {
            display: none;
        }
    }
</style>

    
<style>
    /* SETTINGS */
    .sportorg-settings {
        position: fixed;
        border: 1px solid #dddddd;
        border-radius: 5px;
        background: white;
        top: 3px;
        right: 3px;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    .sportorg-settings-row {
        margin: 5px;
    }

    @media print {
        .sportorg-settings {
            display: none;
        }
    }
</style>
<script>
    var MAX_ORG_NAME = 50;
    var MAX_PERSON_NAME = 30;

    var TableGenerator = (function () {
        var Table = function () {
            return document.createElement('table');
        };
        var THead = function () {
            return document.createElement('thead');
        };
        var TBody = function () {
            return document.createElement('tbody');
        };
        var Tr = function () {
            return document.createElement('tr');
        };
        var Th = function () {
            return document.createElement('th');
        };
        var Td = function () {
            return document.createElement('td');
        };

        function TableGenerator(data, fields) {
            this.data = data;
            this.fields = fields;
        }

        TableGenerator.prototype.getTable = function (options) {
            var table = Table();
            if (options && options.className) table.className = options.className;
            table.appendChild(this.getHead());
            table.appendChild(this.getBody());
            return table;
        };

        TableGenerator.prototype.getHead = function () {
            var tr = Tr();
            for (var _i = 0, _a = this.headers(); _i < _a.length; _i++) {
                var key = _a[_i];
                var th = Th();
                var title = this.getHeaderName(key);
                if (title instanceof Node) {
                    th.appendChild(title);
                }
                else {
                    th.appendChild(document.createTextNode(title));
                }
                tr.appendChild(th);
            }
            var thead = THead();
            thead.appendChild(tr);
            return thead;
        };

        TableGenerator.prototype.getBody = function () {
            var tbody = TBody();
            var cols = this.headers().length;
            for (var _b = 0, _c = this.data; _b < _c.length; _b++) {
                var obj = _c[_b];
                var tr = Tr();
                if (obj instanceof Node || typeof obj === 'string') {
                    var td = Td();
                    td.colSpan = cols;
                    if (typeof obj === 'string') {
                        td.appendChild(document.createTextNode(obj));
                    }
                    else {
                        td.appendChild(obj);
                    }
                    tr.appendChild(td);
                }
                else {
                    for (var _i = 0, _a = this.headers(); _i < _a.length; _i++) {
                        var key = _a[_i];
                        var td = Td();
                        if (obj[key]) {
                            if (obj[key] instanceof Node) {
                                td.appendChild(obj[key]);
                            }
                            else {
                                td.appendChild(document.createTextNode(obj[key]));
                            }
                        }
                        tr.appendChild(td);
                    }
                }
                tbody.appendChild(tr);
            }
            return tbody;
        };

        TableGenerator.prototype.headers = function () {
            if (this._headers) {
                return this._headers
            }
            if (!this.fields) {
                var headers = {};
                for (var _i = 0, _a = this.data; _i < _a.length; _i++) {
                    var obj = _a[_i];
                    for (var key in obj) {
                        headers[key] = true;
                    }
                }
                this._headers = Object.keys(headers)
            } else if (this.fields instanceof Array) {
                this._headers = [];
                for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {
                    var field = _a[_i];
                    if (typeof field === 'string') {
                        this._headers.push(field);
                    }
                    else if (field.active !== false) {
                        this._headers.push(field.key);
                    }
                }
            }
            return this._headers;
        };

        TableGenerator.prototype.getHeaderName = function (key) {
            if (this.fields && this.fields instanceof Array) {
                for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {
                    var field = _a[_i];
                    if (typeof field === 'object' && field.key === key) {
                        return field.title;
                    }
                }
            }
            return key;
        };

        return TableGenerator
    }());

    var TableTextGenerator = (function () {

        function TableTextGenerator(data, fields) {
            this.data = data;
            this.fields = fields;
        }

        TableTextGenerator.prototype.getTable = function (options) {
            var node = document.createElement('pre');
            if (options && options.className) node.className = options.className;
            node.appendChild(this.getHead());
            node.appendChild(this.getBody());
            return node;
        };

        TableTextGenerator.prototype.getSliceText = function (text, size) {
            if (text === undefined) {
                text = '';
            }
            text = String(text);
            if (size) {
                text = text.slice(0, size);
                if (text.length < size + 1) {
                    var arr = [];
                    for (var i = 0; i < size + 1 - text.length; i++) {
                        arr.push(' ');
                    }
                    text += arr.join('');
                }
            } else {
                text += '\t';
            }
            return text;
        };

        TableTextGenerator.prototype.getHead = function () {
            var text = '';
            for (var _i = 0, _a = this.headers(); _i < _a.length; _i++) {
                var key = _a[_i];
                var h = this.getHeaderObj(key);
                var title = h && h.title;
                var size = h && h.size;
                if (size) {
                    text += this.getSliceText(title, size);
                } else {
                    text += title;
                }
            }
            text += '\n';
            var blockU = document.createElement('u');
            var blockB = document.createElement('b');
            blockB.appendChild(document.createTextNode(text));
            blockU.appendChild(blockB);
            return blockU;
        };

        TableTextGenerator.prototype.getBody = function () {
            var text = '';
            for (var _b = 0, _c = this.data; _b < _c.length; _b++) {
                var obj = _c[_b];
                if (typeof obj === 'string') {
                    text += obj;
                } else {
                    for (var _i = 0, _a = this.headers(); _i < _a.length; _i++) {
                        var key = _a[_i];
                        var h = this.getHeaderObj(key);
                        var size = h && h.size;
                        if (size) {
                            text += this.getSliceText(obj[key], size);
                        } else {
                            text += obj[key];
                        }
                    }
                }
                text += '\n';
            }
            return document.createTextNode(text);
        };

        TableTextGenerator.prototype.headers = function () {
            if (this._headers) {
                return this._headers
            }
            if (!this.fields) {
                var headers = {};
                for (var _i = 0, _a = this.data; _i < _a.length; _i++) {
                    var obj = _a[_i];
                    for (var key in obj) {
                        headers[key] = true;
                    }
                }
                this._headers = Object.keys(headers)
            } else if (this.fields instanceof Array) {
                this._headers = [];
                for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {
                    var field = _a[_i];
                    if (typeof field === 'string') {
                        this._headers.push(field);
                    }
                    else if (field.active !== false) {
                        this._headers.push(field.key);
                    }
                }
            }
            return this._headers;
        };

        TableTextGenerator.prototype.getHeaderName = function (key) {
            if (this.fields && this.fields instanceof Array) {
                for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {
                    var field = _a[_i];
                    if (typeof field === 'object' && field.key === key) {
                        return field.title;
                    }
                }
            }
            return key;
        };

        TableTextGenerator.prototype.getHeaderObj = function (key) {
            if (this.fields && this.fields instanceof Array) {
                for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {
                    var field = _a[_i];
                    if (typeof field === 'object' && field.key === key) {
                        return field;
                    }
                }
            }
        };

        return TableTextGenerator
    }());

    var SettingsGenerator = (function () {
        var Block = function () {
            var el = document.createElement('div');
            el.className = 'sportorg-settings';
            return el
        };
        var Row = function () {
            var el = document.createElement('div');
            el.className = 'sportorg-settings-row';
            return el
        };

        function SettingsGenerator(settings) {
            this.settings = settings;
            this.isShow = true;
        }

        SettingsGenerator.prototype.show = function () {
            var block = Block();
            this.el = block;
            for (var _i = 0, _a = this.settings; _i < _a.length; _i++) {
                var setting = _a[_i];
                var row = Row();
                row.className = row.className + ' ' + 'sportorg-settings-hidden';
                row.appendChild(this.getElBySetting(setting));
                block.appendChild(row);
            }
            var btn = Row();
            btn.appendChild(this.getHiddenButton());
            block.appendChild(btn);
            document.body.appendChild(block);
            this.toggleHidden();
        };
        SettingsGenerator.prototype.getElBySetting = function (setting) {
            if (typeof setting.value === 'boolean') {
                var i = document.createElement('input');
                i.type = 'checkbox';
                if (setting.value) {
                    i.checked = true;
                }
                if (setting.change) {
                    i.onchange = function () {
                        if (i.checked !== setting.value) {
                            setting.change(i.checked);
                            setting.value = i.checked;
                        }
                    }
                }
                var label = document.createElement('label');
                label.appendChild(i);
                label.appendChild(document.createTextNode(setting.title));
                return label
            } else if (setting.value instanceof Array) {
                var s = document.createElement('select');
                for (var _i = 0, _a = setting.value; _i < _a.length; _i++) {
                    var obj = _a[_i];
                    s.appendChild(new Option(obj.text, obj.value));
                }
                if (setting.change) {
                    s.onchange = function () {
                        var results = [];
                        for (var _i = 0, _a = s.selectedOptions; _i < _a.length; _i++) {
                            var item = _a[_i];
                            results.push(item.value);
                        }
                        setting.change(results);
                    };
                }
                var label = document.createElement('label');
                label.appendChild(document.createTextNode(setting.title));
                label.appendChild(s);
                return label
            }
        };
        SettingsGenerator.prototype.toggleHidden = function () {
            var els = document.getElementsByClassName('sportorg-settings-hidden');
            for (var _i = 0, els_ = els; _i < els_.length; _i++) {
                var el = els_[_i];
                if (this.isShow) {
                    el.style.display = 'none';
                    if (this.el) {
                        this.el.style.opacity = '.3';
                    }
                }
                else {
                    el.style.display = 'block';
                    if (this.el) {
                        this.el.style.opacity = '1';
                    }
                }
            }
            this.isShow = !this.isShow;
        };
        SettingsGenerator.prototype.getHiddenButton = function () {
            var el = document.createElement('button');
            el.appendChild(document.createTextNode('SETTINGS'));
            var _this = this;
            el.onclick = function (ev) { _this.toggleHidden() };
            return el;
        };
        return SettingsGenerator;
    }());

    function toHHMMSS(value) {
        if (value === 0) {
            return '00:00:00'
        }
        if (!value) return '';
        value /= 1000;
        var hours = Math.floor(value / 3600);
        value %= 3600;
        var minutes = Math.floor(value / 60);
        var seconds = ~~(value % 60);

        var date = new Date(2000, 0, 1, hours, minutes, seconds);

        var with0 = function (dd) {
            return (dd < 10 ? '0' + dd : dd) + '';
        };

        return with0(date.getHours()) + ':' + with0(date.getMinutes()) + ':' + with0(date.getSeconds());
    }

    function getById(list, id) {
        if (id) {
            for (var _i = 0, list_ = list; _i < list_.length; _i++) {
                var obj = list_[_i];
                if (obj.id === id) {
                    return obj;
                }
            }
        }
        return null;
    }

    function racePreparation(race) {
        for (var _i = 0, _a = race.persons; _i < _a.length; _i++) {
            var obj = _a[_i];
            obj.organization = getById(race.organizations, obj.organization_id);
            obj.group = getById(race.groups, obj.group_id);
        }
        for (var _b = 0, _c = race.results; _b < _c.length; _b++) {
            var obj = _c[_b];
            obj.status = obj.status === 16 ? 1 : obj.status;
            obj.person = getById(race.persons, obj.person_id);
        }
        for (var _d = 0, _e = race.groups; _d < _e.length; _d++) {
            var obj = _e[_d];
            obj.course = getById(race.courses, obj.course_id);
        }
        for (var _f = 0, _g = ['groups', 'courses', 'organizations']; _f < _g.length; _f++) {
            var itemName = _g[_f];
            race[itemName].sort(function (a, b) {
                if (a.name.toUpperCase() < b.name.toUpperCase())
                    return -1;
                if (a.name.toUpperCase() > b.name.toUpperCase())
                    return 1;
                return 0;
            });
        }
        return race;
    }

    function getGroupsBlockElement(race) {
        var groupBlock = document.createElement('div');
        groupBlock.className = 'no-print';
        for (var _i = 0, _a = race.groups; _i < _a.length; _i++) {
            var group = _a[_i];
            var a = document.createElement('a');
            a.href = '#' + group.name;
            a.appendChild(document.createTextNode(group.name + ' '));
            groupBlock.appendChild(a);
        }
        return groupBlock;
    }

    function dateFormat(date) {
        date = date ? new Date(date) : new Date();
		return date.getDate().toString().padStart(2,'0')  + '.' + (date.getMonth() + 1).toString().padStart(2,'0') + '.' + date.getFullYear();
    }

    var Qualification = {
        '': 'б/р',
        0: 'б/р',
        3: 'IIIю',
        2: 'IIю',
        1: 'Iю',
        6: 'III',
        5: 'II',
        4: 'I',
        7: 'КМС',
        8: 'МС',
        9: 'МСМК'
    };

    var STATUS_PRIORITY = [8, 4, 3, 5, 13];

    function guid() {
        function s4() {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        }
        return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
    }
</script>

</head>
<body>
<div id="content">
<div class="text-center">
    <h3> <br>
    15.12.2024 </h3>
    <h2>START LIST</h2>
</div>
<div id="start-list-tables"></div>

<script>
    var race = {"courses": [{"bib": 0, "climb": 0, "controls": [{"code": "39", "length": 0, "object": "CourseControl"}, {"code": "40", "length": 0, "object": "CourseControl"}, {"code": "46", "length": 0, "object": "CourseControl"}, {"code": "45", "length": 0, "object": "CourseControl"}, {"code": "44", "length": 0, "object": "CourseControl"}, {"code": "43", "length": 0, "object": "CourseControl"}, {"code": "38", "length": 0, "object": "CourseControl"}, {"code": "100", "length": 0, "object": "CourseControl"}], "corridor": 0, "id": "a602d0f4-ba1f-4bea-adea-c70cba22e014", "length": 1300, "name": "D4", "object": "Course"}, {"bib": 0, "climb": 0, "controls": [{"code": "37", "length": 0, "object": "CourseControl"}, {"code": "100", "length": 0, "object": "CourseControl"}, {"code": "39", "length": 0, "object": "CourseControl"}, {"code": "100", "length": 0, "object": "CourseControl"}, {"code": "38", "length": 0, "object": "CourseControl"}, {"code": "100", "length": 0, "object": "CourseControl"}, {"code": "40", "length": 0, "object": "CourseControl"}, {"code": "100", "length": 0, "object": "CourseControl"}], "corridor": 0, "id": "aad988ca-c9c1-4013-9e00-4201a5397b48", "length": 1900, "name": "D3", "object": "Course"}, {"bib": 0, "climb": 0, "controls": [{"code": "38", "length": 0, "object": "CourseControl"}, {"code": "31", "length": 0, "object": "CourseControl"}, {"code": "32", "length": 0, "object": "CourseControl"}, {"code": "34", "length": 0, "object": "CourseControl"}, {"code": "36", "length": 0, "object": "CourseControl"}, {"code": "37", "length": 0, "object": "CourseControl"}, {"code": "40", "length": 0, "object": "CourseControl"}, {"code": "46", "length": 0, "object": "CourseControl"}, {"code": "45", "length": 0, "object": "CourseControl"}, {"code": "44", "length": 0, "object": "CourseControl"}, {"code": "42", "length": 0, "object": "CourseControl"}, {"code": "41", "length": 0, "object": "CourseControl"}, {"code": "39", "length": 0, "object": "CourseControl"}, {"code": "100", "length": 0, "object": "CourseControl"}], "corridor": 0, "id": "ca665ceb-4d98-4cde-a9b2-fc78d1b0128d", "length": 2500, "name": "D2", "object": "Course"}, {"bib": 0, "climb": 0, "controls": [{"code": "36", "length": 0, "object": "CourseControl"}, {"code": "35", "length": 0, "object": "CourseControl"}, {"code": "34", "length": 0, "object": "CourseControl"}, {"code": "31", "length": 0, "object": "CourseControl"}, {"code": "33", "length": 0, "object": "CourseControl"}, {"code": "32", "length": 0, "object": "CourseControl"}, {"code": "40", "length": 0, "object": "CourseControl"}, {"code": "42", "length": 0, "object": "CourseControl"}, {"code": "41", "length": 0, "object": "CourseControl"}, {"code": "43", "length": 0, "object": "CourseControl"}, {"code": "44", "length": 0, "object": "CourseControl"}, {"code": "45", "length": 0, "object": "CourseControl"}, {"code": "46", "length": 0, "object": "CourseControl"}, {"code": "39", "length": 0, "object": "CourseControl"}, {"code": "37", "length": 0, "object": "CourseControl"}, {"code": "38", "length": 0, "object": "CourseControl"}, {"code": "100", "length": 0, "object": "CourseControl"}], "corridor": 0, "id": "303cd8a6-0921-4ac5-8760-51ac5ed31b0f", "length": 3300, "name": "D1", "object": "Course"}], "data": {"chief_referee": "", "description": "", "end_datetime": "2024-12-15 13:00:00", "location": "", "race_type": 0, "relay_leg_count": 3, "secretary": "", "start_datetime": "2024-12-15 11:00:00", "title": "Тренировочный старт", "url": ""}, "groups": [{"__type": null, "count_finished": 0, "count_person": 9, "course_id": "303cd8a6-0921-4ac5-8760-51ac5ed31b0f", "first_number": 0, "id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "is_any_course": false, "long_name": "", "max_age": 0, "max_time": 0, "max_year": 0, "min_age": 0, "min_year": 0, "name": "D1", "object": "Group", "order_in_corridor": 0, "price": 0, "ranking": {"is_active": false, "rank": [{"is_active": false, "max_place": "2", "max_time": null, "min_scores": null, "percent": 0, "qual": 8, "use_scores": false}, {"is_active": false, "max_place": "6", "max_time": null, "min_scores": null, "percent": 0, "qual": 7, "use_scores": false}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 4, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 5, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 6, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 1, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 2, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 3, "use_scores": true}], "rank_scores": 0}, "relay_legs": 0, "sex": 0, "start_corridor": 0, "start_interval": 0}, {"__type": null, "count_finished": 0, "count_person": 9, "course_id": "ca665ceb-4d98-4cde-a9b2-fc78d1b0128d", "first_number": 0, "id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "is_any_course": false, "long_name": "", "max_age": 0, "max_time": 0, "max_year": 0, "min_age": 0, "min_year": 0, "name": "D2", "object": "Group", "order_in_corridor": 0, "price": 0, "ranking": {"is_active": false, "rank": [{"is_active": false, "max_place": "2", "max_time": null, "min_scores": null, "percent": 0, "qual": 8, "use_scores": false}, {"is_active": false, "max_place": "6", "max_time": null, "min_scores": null, "percent": 0, "qual": 7, "use_scores": false}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 4, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 5, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 6, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 1, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 2, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 3, "use_scores": true}], "rank_scores": 0}, "relay_legs": 0, "sex": 0, "start_corridor": 0, "start_interval": 0}, {"__type": null, "count_finished": 0, "count_person": 5, "course_id": "aad988ca-c9c1-4013-9e00-4201a5397b48", "first_number": 0, "id": "62cd9860-911d-4ae6-a5bf-497c03df3c79", "is_any_course": false, "long_name": "", "max_age": 0, "max_time": 0, "max_year": 0, "min_age": 0, "min_year": 0, "name": "D3", "object": "Group", "order_in_corridor": 0, "price": 0, "ranking": {"is_active": false, "rank": [{"is_active": false, "max_place": "2", "max_time": null, "min_scores": null, "percent": 0, "qual": 8, "use_scores": false}, {"is_active": false, "max_place": "6", "max_time": null, "min_scores": null, "percent": 0, "qual": 7, "use_scores": false}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 4, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 5, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 6, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 1, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 2, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 3, "use_scores": true}], "rank_scores": 0}, "relay_legs": 0, "sex": 0, "start_corridor": 0, "start_interval": 0}, {"__type": null, "count_finished": 0, "count_person": 1, "course_id": "a602d0f4-ba1f-4bea-adea-c70cba22e014", "first_number": 0, "id": "50220ed7-2646-4104-9996-1c68e8484b08", "is_any_course": false, "long_name": "", "max_age": 0, "max_time": 0, "max_year": 0, "min_age": 0, "min_year": 0, "name": "D4", "object": "Group", "order_in_corridor": 0, "price": 0, "ranking": {"is_active": false, "rank": [{"is_active": false, "max_place": "2", "max_time": null, "min_scores": null, "percent": 0, "qual": 8, "use_scores": false}, {"is_active": false, "max_place": "6", "max_time": null, "min_scores": null, "percent": 0, "qual": 7, "use_scores": false}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 4, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 5, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 6, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 1, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 2, "use_scores": true}, {"is_active": true, "max_place": "0", "max_time": null, "min_scores": null, "percent": 0, "qual": 3, "use_scores": true}], "rank_scores": 0}, "relay_legs": 0, "sex": 0, "start_corridor": 0, "start_interval": 0}], "id": "d3d1352e-35e3-400d-bcfc-f1c0d4e25df7", "object": "Race", "organizations": [{"code": "", "contact": "", "count_person": 24, "country": "", "id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "name": "", "object": "Organization", "region": "", "sex": 0}], "persons": [{"bib": 0, "birth_date": null, "card_number": 8500697, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "25427264-8edc-4313-9722-2c0714eea762", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Дуня", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Чанчаревич", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8680263, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "ad4838a7-a2e8-4793-b04d-d0740e68add0", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Георгий", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Яценко", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 0, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "ae352ca6-855f-4e51-abc6-7f3999836223", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": true, "name": "Анна", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Яценко", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 0, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "71df15fd-39a2-47ac-90b5-50ca2cceaa36", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": true, "name": "Татьяна", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Молчанова", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 0, "comment": "", "group_id": "50220ed7-2646-4104-9996-1c68e8484b08", "id": "791dc738-73c9-4e93-8c0f-a414bed00e22", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": true, "name": "Лукьян", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Яценко", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8628696, "comment": "", "group_id": "62cd9860-911d-4ae6-a5bf-497c03df3c79", "id": "5907bbc5-3161-4fef-99b7-74ea6f045be9", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Андрей", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Доронин", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 2070511, "comment": "", "group_id": "62cd9860-911d-4ae6-a5bf-497c03df3c79", "id": "2faee3c9-db3e-476a-8852-280e299d7aaa", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Серафим", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Яценко", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 2070510, "comment": "", "group_id": "62cd9860-911d-4ae6-a5bf-497c03df3c79", "id": "57a5a14b-517b-464b-9f6d-3d18497d6a50", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Степан", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Яценко", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8630815, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "c1cb8755-1d6b-4951-96b7-8ef895cdcf1b", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Сергей", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Доронин", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8110332, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "82500984-17fe-4c85-a45f-3927e88da126", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Драгиш", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Вит", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8870100, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "d5d6bdb2-91c0-47cd-b071-fb3415117f6e", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Игорь", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Сазонов", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 2095317, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "23513dc6-4920-44f5-aad1-eeb130ca4afc", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Борис", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Старович", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 1413324, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "cc891649-dd7f-468c-a5c3-5df4954286bc", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Соня", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Старович", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8500693, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "0d359c2e-e233-4fcb-8b8c-60f77b8480a2", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Ясна", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Старович", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 1428804, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "0bc2096e-b70f-46bb-838e-c3f2c72c6153", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Юлия", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Лукашина", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 1312960, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "80e35d0b-455a-4e6c-9e60-918d3bb1bf8d", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Ксения", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Нестерова", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 2070981, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "8878703d-0612-43c8-9ac9-8055c4f88fd2", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Давор", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Мишич", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8500691, "comment": "", "group_id": "e1311ac3-ddf5-47e4-a914-836dbe823674", "id": "79dc6312-e8aa-48a6-bb09-d63f9e14122d", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Урош", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Мишич", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8500698, "comment": "", "group_id": "62cd9860-911d-4ae6-a5bf-497c03df3c79", "id": "e026a1d2-8f19-4a6a-8172-b819380a36b0", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Райна", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Петрович", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8090037, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "fcdab8f8-82bd-4143-ae83-b549f80b4628", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Давид", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Петрович", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8090031, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "76d77132-950f-41fd-b69e-ffa7eec78c13", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Александар", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Петрович", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 2070987, "comment": "", "group_id": "62cd9860-911d-4ae6-a5bf-497c03df3c79", "id": "88537939-d475-439e-9e74-ecd2ac7957bb", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Александра", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Разумная", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8505224, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "f7412730-1b69-4b12-abe0-e4f2de649784", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Татьяна", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Разумная", "world_code": "", "year": 0}, {"bib": 0, "birth_date": null, "card_number": 8040382, "comment": "", "group_id": "be9a8172-a7f9-4b62-9440-abde5a3da36d", "id": "2412dc4f-ea01-4b45-acd5-6505524b4482", "is_out_of_competition": false, "is_paid": false, "is_personal": false, "is_rented_card": false, "name": "Василий", "national_code": "0", "object": "Person", "organization_id": "2478b7b4-229e-4632-923a-b30e3d15ff87", "qual": 0, "sex": 0, "start_group": 0, "start_time": 0, "surname": "Амбросимов", "world_code": "", "year": 0}], "results": [], "settings": {"ignore_punches_before_start": false, "marked_route_dont_dsq": false, "marked_route_if_counting_lap": false, "marked_route_if_station_check": false, "marked_route_max_penalty_by_cp": false, "marked_route_mode": "off", "marked_route_penalty_lap_station_code": 80, "marked_route_penalty_time": 60000, "readout_duplicate_timeout": 15000, "result_processing_fixed_score_value": 1, "result_processing_mode": "time", "result_processing_score_mode": "rogain", "result_processing_scores_allow_duplicates": false, "result_processing_scores_max_overrun_time": 1800000, "result_processing_scores_minute_penalty": 1, "scores_array": "40,37,35,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1", "scores_formula": "200 - 100 * time / leader", "scores_mode": "off", "system_assign_chip_reading": "off", "system_assignment_mode": false, "system_duplicate_chip_processing": "several_results", "system_finish_cp_number": 90, "system_finish_source": "station", "system_missed_finish": "zero", "system_port": "COM3", "system_start_cp_number": 31, "system_start_source": "protocol", "system_zero_time": [11, 0, 0], "time_accuracy": 0, "time_format_24": "less24", "time_rounding": "down"}};
    racePreparation(race);

    function getStartListByGroup(group) {
        var isRelay = group.__type ? group.__type === 3 : race.data.race_type === 3;
        var results = [];
        for (var _i = 0, _a = race.persons; _i < _a.length; _i++) {
            var person = _a[_i];
            if (person.group && person.group.id === group.id) {
                results.push({
                    index: 0,
                    name: person.surname + ' ' + person.name,
                    org: (person.organization && String(person.organization.name).slice(0, MAX_ORG_NAME)) || '',
                    qual: Qualification[person.qual],
                    bib: person.bib,
                    card_number: person.card_number,
                    year: person.birth_date ? (new Date(person.birth_date)).getFullYear() : '',
                    start: toHHMMSS(person.start_time),
                    start_time: person.start_time,
					comment: person.comment
                });
            }
        }
        results.sort(function (a, b) {
            if (isRelay && a.start_time === b.start_time) {
                if (a.bib % 1000 === b.bib % 1000) {
                    return ~~(a.bib / 1000) - ~~(b.bib / 1000)
                } else {
                    return a.bib % 1000 - b.bib % 1000
                }
            }
            if (a.start_time === b.start_time) {
                return a.bib - b.bib;
            }
            return a.start_time - b.start_time
        });
        var index = 0;
        results.forEach(function (elem) {
            index++;
            elem.index = index
        });
        if (isRelay) {
            index = 0;
            var prevBib = 0;
            var resultsList = results.slice();
            results = [];
            for (var _i = 0, resultsList_ = resultsList; _i < resultsList_.length; _i++) {
                var r = resultsList_[_i];
                r.index = '';
                if (r.bib % 1000 !== prevBib) {
                    index++;
                    results.push({index: index});
                    prevBib = r.bib % 1000;
                }
                results.push(r);
            }
        }
        return results;
    }

    var Fields = {
        fields: [
            {key: 'index', title: '№', size: 4},
            {key: 'name', title: 'Name', size: 30},
            {key: 'org', title: 'Fed', size: 20},
            {key: 'year', title: 'Year', size: 5},
            {key: 'bib', title: 'Bib', size: 6},
            {key: 'card_number', title: 'Card1', size: 11},
			{key: 'comment', title: 'Card2', size: 11},
            {key: 'start', title: 'Start', size: 13}
        ],
        active: function (key, val) {
            for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {
                var obj = _a[_i];
                if (key === obj.key) {
                    obj.active = val;
                }
            }
        },
        isActive: function (key) {
            for (var _i = 0, _a = this.fields; _i < _a.length; _i++) {
                var obj = _a[_i];
                if (key === obj.key) {
                    if (obj.active === void 0) {
                        return true;
                    }
                    else {
                        return !!obj.active;
                    }
                }
            }
            return false;
        },
        init: function () {
            return this;
        }
    }.init();

    var store = {};

    function render() {
        var resultBlock = document.getElementById('start-list-tables');
        resultBlock.innerHTML = '';
        for (var _i = 0, _a = race.groups; _i < _a.length; _i++) {
            var group = _a[_i];
            var titleBlock = document.createElement('h2');
            titleBlock.id = group.name;
            titleBlock.appendChild(document.createTextNode(group.name));
            resultBlock.appendChild(titleBlock);
            resultBlock.appendChild(getGroupsBlockElement(race));
            if (store.tableView) {
                resultBlock.appendChild(new TableGenerator(getStartListByGroup(group), Fields.fields).getTable({className: 'sportorg-table'}));
            } else {
                resultBlock.appendChild(new TableTextGenerator(getStartListByGroup(group), Fields.fields).getTable());
            }
        }
    }
    render();

    var Scrolling = {
        direction: 1,
        enabled: false,
        lock: false,
        prev: 0,
        intervalTimer: 0,
        init: function () {
            var _this = this;
            if (_this.intervalTimer) {
                clearInterval(_this.intervalTimer)
            }
            _this.intervalTimer = setInterval(function () {
                _this.lock = !_this.lock;
            }, 5000);
            window.onscroll = function () {
                var d = document.documentElement;
                var offset = d.scrollTop + window.innerHeight;
                var height = d.offsetHeight;

                if (offset === height) {
                    _this.direction = -1;
                }
                if (offset <= window.innerHeight) {
                    _this.direction = 1;
                }
            };
            this.pageScroll();
            return this;
        },
        pageScroll: function () {
            var _this = this;
            if (_this.enabled && ! _this.lock) {
                window.scrollBy(10, _this.direction);
            }
            setTimeout(function () {
                _this.pageScroll();
            }, 10);
        }
    }.init();

    new SettingsGenerator([
        {
            title: 'Table view',
            value: !!store.tableView,
            change: function (checked) {
                store.tableView = checked;
                render()
            }
        },
        {
            title: 'Bib',
            value: Fields.isActive('bib'),
            change: function (checked) {
                Fields.active('bib', checked);
                render()
            }
        },
        {
            title: 'Card number',
            value: Fields.isActive('card_number'),
            change: function (checked) {
                Fields.active('card_number', checked);
                render()
            }
        },
        {
            title: 'Autoscroll',
            value: Scrolling.enabled,
            change: function (checked) {
                Scrolling.enabled = checked;
            }
        },
    ]).show();
</script>

</div>
<div id="footer">
    
    <a href="https://sportorg.readthedocs.io">ПО SportOrg v1.7.1</a>
    <script type="text/javascript">
        var l = new Date();
        document.write ('<span class="print-only">Время печати: ' + l.toLocaleString() + '</span>');
    </script>
    
</div>
</body>
</html>